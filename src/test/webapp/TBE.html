<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>TEST : TBE</title>
<script src="TBE.js"></script>
<style>
body {
	font-family: sans-serif;
	font-size: 0.9em;
}

h2 {
	cursor: pointer;
}

.millis {
	font-size: 0.8em;
	color: #777;
}
</style>
</head>
<body>
	<h1>TEST : TimeBasedEncrypter (TBE)</h1>
	<ul>
		<li>Allows Tester to:
			<ul>
				<li>Fetch a signed timestamp from the server</li>
				<li>Verify it</li>
				<li>Fabricate an object</li>
				<li>Request the server to escrow the object to some point in
					the future</li>
				<li>Request the key and decrypt the object</li>
			</ul>
		</li>
		<li>Fails if something fails: <span id="imp">not
				implemented</span></li>
	</ul>
	<div>
		<h2 onclick="hideKids(event);">Fetch Signed Timestamp from Server</h2>
		<div Xstyle="display: none">
			<button id="fetchbtn" onclick="getSignedTimestamp();">Fetching</button>
			<progress id="fetchpb"></progress>
			<span id="fetchms" class="millis"></span>
			<div>
				Signed Timestamp: <input id="tsr" /><br /> t : <input id="tsT" />
				&rArr; <input id="tsTimeEnc" /> &rArr; <input id="tsTime" /><br />
				s : <input id="tsS" /> &rArr; <input id="tsSig" /><br /> k : <input
					id="tsK" /> &rArr; <input id="tsKeyData" /> &rArr; <input
					id="tsKey" /> <span id="impms" class="millis"></span><br /> <span
					id="tsValid"></span> <span id="verifyms" class="millis"></span>
			</div>
		</div>
	</div>
	<hr />
	<div>
		<h2 onclick="hideKids(event);">Request Escrow</h2>
		<div>
			Data:
			<textarea id="dat">Hello World</textarea>
			<br /> Time: <input id="tim" value="1550863501025" />
			<button onclick="setTime(new Date().getTime() + 1000);">Now
				+ 1s</button>
			<button onclick="setTime(new Date().getTime() + 10000);">Now
				+ 10s</button>
			<button onclick="setTime(new Date().getTime() + 30000);">Now
				+ 30s</button>
			<button onclick="setTime(new Date().getTime() + 60000);">Now
				+ 60s</button>
			<br />
			<button id="reqEsc" onclick="requestEscrow();">Request</button>
			<br />
			<textarea id="req"></textarea>
		</div>
	</div>
	<hr />
	<div>
		<h2 onclick="hideKids(event);">Request Key</h2>
		<div>
			Time: <input id="k4tim" value="1550863501025" />
			<button onclick="getAboveTime();">from above</button>
			<br />
			<button onclick="requestKey();">Request Key</button>
			<br />
			<textarea id="k4req"></textarea>
		</div>
	</div>
	<hr />
</body>
</html>